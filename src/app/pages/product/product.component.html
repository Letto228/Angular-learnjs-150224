<ng-container *ngIf="product$ | async as product; else spiner">
    <div>
        <div
            *appCarousel="let currentImage of product.images; let next = next; let back = back"
            class="galerey"
        >
            <button mat-icon-button (click)="next()">
                <mat-icon>chevron_left</mat-icon>
            </button>
            <img mat-card-image alt="Product photo" [src]="currentImage.url" />
            <button mat-icon-button (click)="back()">
                <mat-icon>chevron_right</mat-icon>
            </button>
        </div>
    </div>
    <div>
        <h1>{{ product.name }}</h1>
        <nav mat-tab-nav-bar [tabPanel]="tabPanel">
            <!-- <a mat-tab-link [routerLink]="'/product/' + product._id + '/description'">description</a> -->
            <a
                mat-tab-link
                queryParamsHandling="preserve"
                [routerLink]="['/product', product._id, 'description']"
                [queryParams]="{price: 200, window: 200}"
            >
                description
            </a>
            <!-- queryParamsHandling = '' - полное перезатирание -->
            <!-- queryParamsHandling = 'merge' - сохранение существуещих параметров и проставление указанных -->
            <!-- queryParamsHandling = 'preserve' - полное сохранение параметров url -->

            <!-- <a mat-tab-link routerLink="./type">type</a> -->
            <a mat-tab-link (click)="onTypeNavigate()">type</a>
        </nav>
        <mat-tab-nav-panel #tabPanel></mat-tab-nav-panel>

        <router-outlet></router-outlet>
    </div>
</ng-container>

<ng-template #spiner>
    <mat-spinner class="spiner"></mat-spinner>
</ng-template>
